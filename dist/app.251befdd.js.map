{"version":3,"sources":["app.js"],"names":["cartBtn","document","querySelector","closeCartBtn","clearCartBtn","cartDOM","cartOverlay","cartItems","cartTotal","cartContent","productsDOM","cart","buttonsDOM","Products","fetch","result","json","products","data","items","map","item","fields","title","price","id","sys","image","file","url","console","log","UI","forEach","product","innerHTML","buttons","querySelectorAll","button","dataset","find","innerText","disabled","addEventListener","e","target","cartItem","Storage","getProduct","amount","saveCart","setCardValues","addCartItem","showCart","tempTotal","itemTotal","parseFloat","toFixed","div","createElement","classList","add","appendChild","getCart","populateCart","hideCart","remove","clearCart","contains","removeItem","removeChild","parentElement","addAmount","tempItem","nextElementSibling","lowerAmount","previousElementSibling","children","length","filter","getSingleButton","localStorage","setItem","JSON","stringify","parse","getItem","ui","setupAPP","getProducts","then","displayProdcts","saveProducts","getBagButtons","cartLogic"],"mappings":"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","file":"app.251befdd.js","sourceRoot":"..","sourcesContent":["// varibles\n\nconst cartBtn = document.querySelector(\".cart-btn\");\nconst closeCartBtn = document.querySelector(\".close-cart\");\nconst clearCartBtn = document.querySelector(\".clear-cart\");\nconst cartDOM = document.querySelector(\".cart\");\nconst cartOverlay = document.querySelector(\".cart-overlay\");\nconst cartItems = document.querySelector(\".cart-items\");\nconst cartTotal = document.querySelector(\".cart-total\");\nconst cartContent = document.querySelector(\".cart-content\");\nconst productsDOM = document.querySelector(\".products-center\");\n\nlet cart = [];\nlet buttonsDOM = [];\n\n// getting the products\nclass Products {\n  async getProducts() {\n    try {\n      let result = await fetch(\"products.json\");\n      let data = await result.json();\n      let products = data.items;\n      products = products.map((item) => {\n        const { title, price } = item.fields;\n        const { id } = item.sys;\n        const image = item.fields.image.fields.file.url;\n        return { title, price, id, image };\n      });\n      return products;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n\n// display products\nclass UI {\n  displayProdcts(products) {\n    let result = \"\";\n    products.forEach((product) => {\n      result += `\n      \n        <article class=\"product\">\n          <div class=\"img-container\">\n            <img\n              src=${product.image}\n              alt=\"product\"\n              class=\"product-img\"\n            />\n            <button class=\"bag-btn\" data-id=${product.id}>\n              <i class=\"fas fa-shopping-cart\">\n                add to cart\n              </i>\n            </button>\n          </div>\n          <h3>${product.title}</h3>\n          <h4>$${product.price}</h4>\n        </article>\n       \n        `;\n    });\n    productsDOM.innerHTML = result;\n  }\n\n  getBagButtons() {\n    const buttons = [...document.querySelectorAll(\".bag-btn\")];\n    buttonsDOM = buttons;\n    buttons.forEach((button) => {\n      let id = button.dataset.id;\n      let inCart = cart.find((item) => item.id === id);\n      if (inCart) {\n        button.innerText = \"In cart\";\n        button.disabled = true;\n      }\n      button.addEventListener(\"click\", (e) => {\n        e.target.innerText = \"In Cart\";\n        // e.target.disabled = true;\n        e.target.disabled = true;\n        // get product from products\n        let cartItem = { ...Storage.getProduct(id), amount: 1 };\n        console.log(cartItem);\n\n        //  add product to the cart\n        cart = [...cart, cartItem];\n        // save cart in local storage\n        Storage.saveCart(cart);\n        // set cart values\n        this.setCardValues(cart);\n\n        // display cart item\n        this.addCartItem(cartItem);\n        // show the cart\n        this.showCart();\n      });\n    });\n  }\n  setCardValues(cart) {\n    let tempTotal = 0;\n    let itemTotal = 0;\n    cart.map((item) => {\n      tempTotal += item.price * item.amount;\n      itemTotal += item.amount;\n    });\n    cartTotal.innerText = parseFloat(tempTotal.toFixed(2));\n    cartItems.innerText = itemTotal;\n  }\n  addCartItem(item) {\n    const div = document.createElement(\"div\");\n    div.classList.add(\"cart-item\");\n    div.innerHTML = ` <img src=${item.image} />\n    <div>\n      <h4>${item.title}</h4>\n      <h5>$${item.price}</h5>\n      <span class=\"remove-item\" data-id=${item.id}>remove</span>\n    </div>\n    <div>\n      <i class=\"fas fa-chevron-up\" data-id=${item.id}></i>\n      <p class=\"item-amount\">${item.amount}</p>\n      <i class=\"fas fa-chevron-down\" data-id=${item.id}></i>\n    </div>`;\n    cartContent.appendChild(div);\n  }\n  showCart() {\n    cartOverlay.classList.add(\"transparentBcg\");\n    cartDOM.classList.add(\"showCart\");\n  }\n  setupAPP() {\n    cart = Storage.getCart();\n    this.setCardValues(cart);\n    this.populateCart(cart);\n    cartBtn.addEventListener(\"click\", this.showCart);\n\n    closeCartBtn.addEventListener(\"click\", this.hideCart);\n  }\n  populateCart(cart) {\n    cart.forEach((item) => this.addCartItem(item));\n  }\n  hideCart() {\n    cartOverlay.classList.remove(\"transparentBcg\");\n    cartDOM.classList.remove(\"showCart\");\n  }\n  cartLogic() {\n    // clear cart\n    clearCartBtn.addEventListener(\"click\", () => this.clearCart());\n    // cart funtionality\n    cartContent.addEventListener(\"click\", (e) => {\n      if (e.target.classList.contains(\"remove-item\")) {\n        let removeItem = e.target;\n        let id = removeItem.dataset.id;\n        cartContent.removeChild(removeItem.parentElement.parentElement);\n        this.removeItem(id);\n      } else if (e.target.classList.contains(\"fa-chevron-up\")) {\n        let addAmount = e.target;\n        let id = addAmount.dataset.id;\n        let tempItem = cart.find((item) => item.id === id);\n\n        tempItem.amount = tempItem.amount + 1;\n        Storage.saveCart(cart);\n        this.setCardValues(cart);\n        addAmount.nextElementSibling.innerText = tempItem.amount;\n      } else if (e.target.classList.contains(\"fa-chevron-down\")) {\n        let lowerAmount = e.target;\n        let id = lowerAmount.dataset.id;\n        let tempItem = cart.find((item) => item.id === id);\n        tempItem.amount = tempItem.amount - 1;\n        if (tempItem.amount > 0) {\n          Storage.saveCart(cart);\n          this.setCardValues(cart);\n          lowerAmount.previousElementSibling.innerText = tempItem.amount;\n        } else {\n          cartContent.removeChild(lowerAmount.parentElement.parentElement);\n          this.removeItem(id);\n          this.hideCart();\n        }\n      }\n    });\n  }\n  clearCart() {\n    let cartItems = cart.map((item) => item.id);\n    cartItems.forEach((id) => this.removeItem(id));\n    while (cartContent.children.length > 0) {\n      cartContent.removeChild(cartContent.children[0]);\n    }\n    this.hideCart();\n  }\n  removeItem(id) {\n    cart = cart.filter((item) => item.id !== id);\n    this.setCardValues(cart);\n    Storage.saveCart(cart);\n    let button = this.getSingleButton(id);\n    button.disabled = false;\n    button.innerHTML = `<i class=\"fas fa-shopping-cart\"></i>add to cart`;\n  }\n\n  getSingleButton(id) {\n    return buttonsDOM.find((button) => button.dataset.id === id);\n  }\n}\n\n// local storage\nclass Storage {\n  static saveProducts(products) {\n    localStorage.setItem(\"products\", JSON.stringify(products));\n  }\n  static getProduct(id) {\n    let products = JSON.parse(localStorage.getItem(\"products\"));\n    return products.find((product) => product.id === id);\n  }\n  static saveCart(cart) {\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n  }\n  static getCart() {\n    return localStorage.getItem(\"cart\")\n      ? JSON.parse(localStorage.getItem(\"cart\"))\n      : [];\n  }\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const ui = new UI();\n  const products = new Products();\n  // setUp app\n  ui.setupAPP();\n  //   get all products\n  products\n    .getProducts()\n    .then((products) => {\n      ui.displayProdcts(products);\n      Storage.saveProducts(products);\n    })\n    .then(() => {\n      ui.getBagButtons();\n      ui.cartLogic();\n    });\n});\n"]}