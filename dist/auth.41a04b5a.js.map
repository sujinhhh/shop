{"version":3,"sources":["scripts/auth.js"],"names":["auth","onAuthStateChanged","user","db","collection","onSnapshot","snapshot","setupGuides","docs","setupUI","error","console","log","createForm","document","querySelector","addEventListener","e","preventDefault","add","title","value","content","then","modal","M","Modal","getInstance","close","reset","catch","err","message","signupForm","email","password","createUserWithEmailAndPassword","cred","doc","uid","set","bio","logout","signOut","loginForm","signInWithEmailAndPassword"],"mappings":";AACAA,KAAKC,mBAAmB,SAACC,GACnBA,EAEFC,GAAGC,WAAW,UAAUC,WACtB,SAACC,GACCC,YAAYD,EAASE,MACrBC,QAAQP,IAEV,SAACQ,GACCC,QAAQC,IAAIF,MAIhBD,UACAF,YAAY,OAKhB,IAAMM,EAAaC,SAASC,cAAc,gBAC1CJ,QAAQC,IAAIC,GAEZA,EAAWG,iBAAiB,SAAU,SAACC,GACrCA,EAAEC,iBACFf,GAAGC,WAAW,UACXe,IAAI,CACHC,MAAOP,EAAU,MAAUQ,MAC3BC,QAAST,EAAU,QAAYQ,QAEhCE,KAAK,WAEEC,IAAAA,EAAQV,SAASC,cAAc,iBACrCU,EAAEC,MAAMC,YAAYH,GAAOI,QAC3Bf,EAAWgB,UAEZC,MAAM,SAACC,GAAQpB,OAAAA,QAAQC,IAAImB,EAAIC,aAGpC,IAAMC,EAAanB,SAASC,cAAc,gBAC1CkB,EAAWjB,iBAAiB,SAAU,SAACC,GACrCA,EAAEC,iBAEIgB,IAAAA,EAAQD,EAAW,gBAAgBZ,MACnCc,EAAWF,EAAW,mBAAmBZ,MAG/CrB,KACGoC,+BAA+BF,EAAOC,GACtCZ,KAAK,SAACc,GACElC,OAAAA,GAAGC,WAAW,SAASkC,IAAID,EAAKnC,KAAKqC,KAAKC,IAAI,CACnDC,IAAKR,EAAW,cAAcZ,UAGjCE,KAAK,WACEC,IAAAA,EAAQV,SAASC,cAAc,iBACrCU,EAAEC,MAAMC,YAAYH,GAAOI,QAC3BK,EAAWJ,YAKjB,IAAMa,EAAS5B,SAASC,cAAc,WACtC2B,EAAO1B,iBAAiB,QAAS,SAACC,GAChCA,EAAEC,iBACFlB,KAAK2C,YAIP,IAAMC,EAAY9B,SAASC,cAAc,eACzC6B,EAAU5B,iBAAiB,SAAU,SAACC,GACpCA,EAAEC,iBAGIgB,IAAAA,EAAQU,EAAU,eAAevB,MACjCc,EAAWS,EAAU,kBAAkBvB,MAE7CrB,KAAK6C,2BAA2BX,EAAOC,GAAUZ,KAAK,SAACc,GAC/Cb,IAAAA,EAAQV,SAASC,cAAc,gBACrCU,EAAEC,MAAMC,YAAYH,GAAOI,QAC3BgB,EAAUf","file":"auth.41a04b5a.js","sourceRoot":"..","sourcesContent":["// Listen FOR AUTH STATUS CHANGES\nauth.onAuthStateChanged((user) => {\n  if (user) {\n    // get data\n    db.collection(\"guides\").onSnapshot(\n      (snapshot) => {\n        setupGuides(snapshot.docs);\n        setupUI(user);\n      },\n      (error) => {\n        console.log(error);\n      }\n    );\n  } else {\n    setupUI();\n    setupGuides([]);\n  }\n});\n\n// create new guide\nconst createForm = document.querySelector(\"#create-form\");\nconsole.log(createForm);\n\ncreateForm.addEventListener(\"submit\", (e) => {\n  e.preventDefault();\n  db.collection(\"guides\")\n    .add({\n      title: createForm[\"title\"].value,\n      content: createForm[\"content\"].value,\n    })\n    .then(() => {\n      // close modal\n      const modal = document.querySelector(\"#modal-create\");\n      M.Modal.getInstance(modal).close();\n      createForm.reset();\n    })\n    .catch((err) => console.log(err.message));\n});\n// sign up\nconst signupForm = document.querySelector(\"#signup-form\");\nsignupForm.addEventListener(\"submit\", (e) => {\n  e.preventDefault();\n  // get user info\n  const email = signupForm[\"signup-email\"].value;\n  const password = signupForm[\"signup-password\"].value;\n\n  // sign up the user\n  auth\n    .createUserWithEmailAndPassword(email, password)\n    .then((cred) => {\n      return db.collection(\"users\").doc(cred.user.uid).set({\n        bio: signupForm[\"signup-bio\"].value,\n      });\n    })\n    .then(() => {\n      const modal = document.querySelector(\"#modal-signup\");\n      M.Modal.getInstance(modal).close();\n      signupForm.reset();\n    });\n});\n\n// LOG OUT\nconst logout = document.querySelector(\"#logout\");\nlogout.addEventListener(\"click\", (e) => {\n  e.preventDefault();\n  auth.signOut();\n});\n\n// LOG IN\nconst loginForm = document.querySelector(\"#login-form\");\nloginForm.addEventListener(\"submit\", (e) => {\n  e.preventDefault();\n\n  // user info\n  const email = loginForm[\"login-email\"].value;\n  const password = loginForm[\"login-password\"].value;\n\n  auth.signInWithEmailAndPassword(email, password).then((cred) => {\n    const modal = document.querySelector(\"#modal-login\");\n    M.Modal.getInstance(modal).close();\n    loginForm.reset();\n  });\n});\n"]}